(this["webpackJsonpmy-project-frontend"]=this["webpackJsonpmy-project-frontend"]||[]).push([[0],{40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var s=a(2),c=a.n(s),r=a(22),i=a.n(r),n=a(6),o=a(4),l=a(1);var d=e=>{let{movie:t}=e;return Object(l.jsx)("div",{className:"movie-card",children:Object(l.jsxs)(n.b,{to:`/movies/${t.id}`,children:[Object(l.jsx)("img",{src:t.image_url,alt:t.title,className:"movie-poster"}),Object(l.jsx)("h3",{className:"movie-title",children:t.title}),Object(l.jsx)("p",{className:"movie-overview",children:t.overview}),Object(l.jsxs)("p",{className:"movie-release-date",children:["Data: ",t.release_date]}),Object(l.jsxs)("p",{className:"movie-vote-average",children:["TMDB: ",t.rating," %"]})]})})},j=a(42);const b="http://127.0.0.1:9000/api",p=`${b}/movies/`,x=`${b}/auth/users/me`,h=`${b}/users/me/avatar`,u={width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",cursor:"pointer",border:"2px solid #ccc",display:"inline-block",verticalAlign:"middle",marginLeft:"15px"};var m=()=>{const[e,t]=Object(s.useState)([]),[a,c]=Object(s.useState)(!0),[r,i]=Object(s.useState)(null),[b,m]=Object(s.useState)(""),[O,g]=Object(s.useState)(!1),[v,y]=Object(s.useState)(null),[f,w]=Object(s.useState)(!1),S=Object(s.useRef)(null),N=(Object(o.f)(),async()=>{i(null);try{const e=await j.a.get(p);t(e.data)}catch(e){console.error("Error fetching movies:",e),i("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0438\u043b\u044c\u043c\u043e\u0432")}finally{c(!1)}}),k=async e=>{try{const t=await j.a.get(x,{headers:{Authorization:`Bearer ${e}`}});t.data.avatar_url?y(t.data.avatar_url):y("/img/default-avatar.png")}catch(r){var t;console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",r),y("/img/default-avatar.png"),401===(null===(t=r.response)||void 0===t?void 0:t.status)&&T()}};Object(s.useEffect)((()=>{c(!0);const e=localStorage.getItem("accessToken");e?(g(!0),Promise.all([N(),k(e)]).catch((e=>console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435:",e))).finally((()=>c(!1)))):(g(!1),y(null),N())}),[]);const C=e.filter((e=>e.title.toLowerCase().includes(b.toLowerCase()))),T=()=>{localStorage.removeItem("accessToken"),g(!1),y(null)};return a?Object(l.jsx)("div",{className:"container",style:{textAlign:"center",marginTop:"50px"},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):r&&!a?Object(l.jsx)("div",{className:"container",style:{textAlign:"center",marginTop:"50px",color:"red"},children:r}):Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)("div",{className:"top-controls",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",marginTop:"20px",padding:"0 15px"},children:[Object(l.jsx)("div",{className:"search-bar",style:{flexGrow:1,marginRight:"20px"},children:Object(l.jsx)("input",{type:"text",placeholder:"Wyszukaj filmy wed\u0142ug tytu\u0142u...",value:b,onChange:e=>{m(e.target.value)},style:{padding:"10px",width:"100%",boxSizing:"border-box"}})}),Object(l.jsx)("div",{className:"auth-section",style:{display:"flex",alignItems:"center",gap:"10px"},children:O?Object(l.jsxs)(l.Fragment,{children:[f?Object(l.jsx)("div",{style:{...u,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f0f0f0",cursor:"default"},children:"..."}):Object(l.jsx)("img",{src:v||"/img/default-avatar.png",alt:"\u0410\u0432\u0430\u0442\u0430\u0440",style:u,onClick:()=>{S.current&&S.current.click()},onError:e=>{e.target.src="/img/default-avatar.png"}}),Object(l.jsx)("input",{type:"file",ref:S,onChange:async e=>{const t=e.target.files[0];if(!t)return;if(!t.type.startsWith("image/"))return void alert("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435.");w(!0);const a=localStorage.getItem("accessToken");if(!a)return console.error("\u041d\u0435\u0442 \u0442\u043e\u043a\u0435\u043d\u0430 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430"),void w(!1);const s=new FormData;s.append("file",t);try{const e=await j.a.post(h,s,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${a}`}});e.data.avatar_url&&(y(e.data.avatar_url),console.log("\u0410\u0432\u0430\u0442\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d!"))}catch(r){var c,i,n;console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430:",r),alert(`\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440: ${(null===(c=r.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.detail)||r.message}`),401===(null===(n=r.response)||void 0===n?void 0:n.status)&&T()}finally{w(!1),S.current&&(S.current.value="")}},style:{display:"none"},accept:"image/*"}),Object(l.jsx)("button",{onClick:T,style:{padding:"8px 12px"},children:"Wyloguj si\u0119"})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(n.b,{to:"/login",style:{textDecoration:"none",padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px"},children:"Zaloguj si\u0119"}),Object(l.jsx)(n.b,{to:"/register",style:{textDecoration:"none",padding:"8px 12px",backgroundColor:"#007bff",color:"white",border:"1px solid #007bff",borderRadius:"4px"},children:"Zarejestruj si\u0119"})]})})]}),Object(l.jsx)("div",{className:"movie-grid",children:C.length>0?C.map((e=>Object(l.jsx)(d,{movie:e},e.id))):Object(l.jsx)("p",{style:{textAlign:"center",width:"100%"},children:e.length>0?`\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 "${b}" \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.`:"\u0424\u0438\u043b\u044c\u043c\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b."})})]})})};var O=()=>{const{id:e}=Object(o.g)(),[t,a]=Object(s.useState)(null),[c,r]=Object(s.useState)(!0),[i,n]=Object(s.useState)(null);return Object(s.useEffect)((()=>{(async()=>{try{const t=await j.a.get(`http://localhost:9000/api/movies/${e}`);a(t.data),r(!1)}catch(t){n("B\u0142\u0105d podczas \u0142adowania danych o filmie"),r(!1)}})()}),[e]),c?Object(l.jsx)("div",{children:"\u0141adowanie..."}):i?Object(l.jsx)("div",{children:i}):t?Object(l.jsxs)("div",{className:"container movie-details",children:[Object(l.jsx)("img",{src:t.image_url,alt:t.title}),Object(l.jsxs)("div",{className:"movie-details-content",children:[Object(l.jsx)("h1",{children:t.title}),Object(l.jsx)("p",{children:t.description}),Object(l.jsxs)("p",{children:["Ocena: ",t.rating]}),Object(l.jsxs)("p",{children:["Gatunki: ",t.genres.join(", ")]}),Object(l.jsxs)("p",{children:["Tw\xf3rca: ",t.creator]})]}),Object(l.jsxs)("div",{className:"movie-actors",children:[Object(l.jsx)("h2",{children:"Aktorzy:"}),Object(l.jsx)("ul",{children:t.actors.map(((e,t)=>Object(l.jsxs)("li",{children:[Object(l.jsx)("img",{src:e.photo_url,alt:e.name}),Object(l.jsx)("p",{children:e.name})]},t)))})]})]}):Object(l.jsx)("div",{children:"Film nie znaleziony"})};var g=()=>Object(l.jsx)("header",{children:Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{className:"nav-menu",children:[Object(l.jsx)("li",{children:Object(l.jsx)(n.b,{to:"/",children:"Strona g\u0142\xf3wna"})}),Object(l.jsx)("li",{children:Object(l.jsx)(n.b,{to:"/popular",children:"Popularne"})}),Object(l.jsx)("li",{children:Object(l.jsx)(n.b,{to:"/top-rated",children:"Najwy\u017cej oceniane"})}),Object(l.jsx)("li",{children:Object(l.jsx)(n.b,{to:"/now-playing",children:"Obecnie w kinach"})})]})})})});var v=()=>Object(l.jsx)("footer",{children:Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()," My Movie App. Wszelkie prawa zastrze\u017cone."]})})});var y=()=>{const[e,t]=Object(s.useState)([]),[a,c]=Object(s.useState)(!0),[r,i]=Object(s.useState)(null);return Object(s.useEffect)((()=>{(async()=>{try{const e=await j.a.get("http://localhost:9000/api/movies/top-rated/");t(e.data)}catch(e){i("Error loading movies")}finally{c(!1)}})()}),[]),a?Object(l.jsx)("div",{children:"Loading..."}):r?Object(l.jsx)("div",{children:r}):Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("h1",{children:"Top Rated Movies"}),Object(l.jsx)("div",{className:"movie-grid",children:e.map((e=>Object(l.jsx)(d,{movie:e},e.id)))})]})};var f=()=>{const[e,t]=Object(s.useState)([]),[a,c]=Object(s.useState)(!0),[r,i]=Object(s.useState)(null);return Object(s.useEffect)((()=>{(async()=>{try{const e=await j.a.get("http://localhost:9000/api/movies/now-playing/");t(e.data)}catch(e){i("Error loading movies")}finally{c(!1)}})()}),[]),a?Object(l.jsx)("div",{children:"Loading..."}):r?Object(l.jsx)("div",{children:r}):Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("h1",{children:"Now Playing Movies"}),Object(l.jsx)("div",{className:"movie-grid",children:e.map((e=>Object(l.jsx)(d,{movie:e},e.id)))})]})};var w=()=>{const[e,t]=Object(s.useState)([]),[a,c]=Object(s.useState)(!0),[r,i]=Object(s.useState)(null);return Object(s.useEffect)((()=>{(async()=>{try{const e=await j.a.get("http://localhost:9000/api/movies/popular/");t(e.data)}catch(e){i("Error loading movies")}finally{c(!1)}})()}),[]),a?Object(l.jsx)("div",{children:"Loading..."}):r?Object(l.jsx)("div",{children:r}):Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("h1",{children:"Popular Movies"}),Object(l.jsx)("div",{className:"movie-grid",children:e.map((e=>Object(l.jsx)(d,{movie:e},e.id)))})]})};var S=function(){const[e,t]=Object(s.useState)(""),[a,c]=Object(s.useState)(""),[r,i]=Object(s.useState)(""),[n,d]=Object(s.useState)(!1),b=Object(o.f)();return Object(l.jsxs)("div",{className:"container auth-container",style:{maxWidth:"400px",margin:"50px auto",padding:"20px",border:"1px solid #ccc",borderRadius:"5px"},children:[Object(l.jsx)("h2",{children:"\u0412\u0445\u043e\u0434"}),Object(l.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(""),d(!0);const s=new URLSearchParams;s.append("username",e),s.append("password",a);try{const e=(await j.a.post("http://127.0.0.1:9000/api/auth/token",s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data.access_token;if(!e)throw new Error("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");localStorage.setItem("accessToken",e),console.log("\u0412\u0445\u043e\u0434 \u0443\u0441\u043f\u0435\u0448\u0435\u043d, \u0442\u043e\u043a\u0435\u043d \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d."),b.push("/")}catch(n){var c,r;console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0445\u043e\u0434\u0430:",n);const e=(null===(c=n.response)||void 0===c||null===(r=c.data)||void 0===r?void 0:r.detail)||n.message||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435.";i(e),localStorage.removeItem("accessToken")}finally{d(!1)}},children:[Object(l.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(l.jsx)("label",{htmlFor:"loginUsername",style:{display:"block",marginBottom:"5px"},children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 Email:"}),Object(l.jsx)("input",{type:"text",id:"loginUsername",value:e,onChange:e=>t(e.target.value),required:!0,disabled:n,style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),Object(l.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(l.jsx)("label",{htmlFor:"loginPassword",style:{display:"block",marginBottom:"5px"},children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(l.jsx)("input",{type:"password",id:"loginPassword",value:a,onChange:e=>c(e.target.value),required:!0,disabled:n,style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),r&&Object(l.jsx)("p",{style:{color:"red",marginTop:"10px"},children:r}),Object(l.jsx)("button",{type:"submit",disabled:n,style:{width:"100%",padding:"10px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:n?"\u0412\u0445\u043e\u0434...":"\u0412\u043e\u0439\u0442\u0438"})]}),Object(l.jsxs)("p",{style:{textAlign:"center",marginTop:"15px"},children:["\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? ",Object(l.jsx)("a",{href:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})," "]})]})};var N=function(){const[e,t]=Object(s.useState)(""),[a,c]=Object(s.useState)(""),[r,i]=Object(s.useState)(""),[n,d]=Object(s.useState)(""),[b,p]=Object(s.useState)(""),[x,h]=Object(s.useState)(!1),u=Object(o.f)();return Object(l.jsxs)("div",{className:"container auth-container",style:{maxWidth:"400px",margin:"50px auto",padding:"20px",border:"1px solid #ccc",borderRadius:"5px"},children:[Object(l.jsx)("h2",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(l.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),d(""),p(""),h(!0);const n={username:e,email:a,password:r};try{const e=await j.a.post("http://127.0.0.1:9000/api/auth/register",n,{headers:{"Content-Type":"application/json"}});p(`\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ${e.data.username} \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d! \u041f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432\u0445\u043e\u0434\u0430...`),t(""),c(""),i(""),setTimeout((()=>{u.push("/login")}),2e3)}catch(l){if(console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438:",l),l.response){var o;const e=(null===(o=l.response.data)||void 0===o?void 0:o.detail)||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438.";d(e)}else l.request?d("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u0430\u0434\u0440\u0435\u0441 API."):d("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430.")}finally{h(!1)}},children:[Object(l.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(l.jsx)("label",{htmlFor:"regUsername",style:{display:"block",marginBottom:"5px"},children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"}),Object(l.jsx)("input",{type:"text",id:"regUsername",value:e,onChange:e=>t(e.target.value),required:!0,disabled:x,style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),Object(l.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(l.jsx)("label",{htmlFor:"regEmail",style:{display:"block",marginBottom:"5px"},children:"Email:"}),Object(l.jsx)("input",{type:"email",id:"regEmail",value:a,onChange:e=>c(e.target.value),required:!0,disabled:x,style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),Object(l.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(l.jsx)("label",{htmlFor:"regPassword",style:{display:"block",marginBottom:"5px"},children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(l.jsx)("input",{type:"password",id:"regPassword",value:r,onChange:e=>i(e.target.value),required:!0,minLength:6,disabled:x,style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),n&&Object(l.jsx)("p",{style:{color:"red",marginTop:"10px"},children:n}),b&&Object(l.jsx)("p",{style:{color:"green",marginTop:"10px"},children:b}),Object(l.jsx)("button",{type:"submit",disabled:x,style:{width:"100%",padding:"10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:x?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f...":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(l.jsxs)("p",{style:{textAlign:"center",marginTop:"15px"},children:["\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442? ",Object(l.jsx)("a",{href:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})," "]})]})};var k=()=>Object(l.jsxs)(n.a,{children:[Object(l.jsx)(g,{}),Object(l.jsxs)(o.c,{children:[" ",Object(l.jsx)(o.a,{exact:!0,path:"/",component:m}),Object(l.jsx)(o.a,{path:"/movies/:id",component:O}),Object(l.jsx)(o.a,{path:"/top-rated",component:y}),Object(l.jsx)(o.a,{path:"/now-playing",component:f}),Object(l.jsx)(o.a,{path:"/popular",component:w}),Object(l.jsx)(o.a,{path:"/login",component:S}),Object(l.jsx)(o.a,{path:"/register",component:N})]}),Object(l.jsx)(v,{})]});a(40);i.a.createRoot(document.getElementById("root")).render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(k,{})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.0decff61.chunk.js.map